---
outline: deep
---

# 一些功能的理解

<!-- ![](/images/cleavage/image.png) -->

<!-- ## 在线重启程序

步骤：

1. 在站点配置中，修改【程序名】、【启动脚本】，点击【提交】
2. 上传更新程序的二进制文件
3. 点击【重启】

**说明：** 点击【重启】前，一定先要修改【程序名】、【启动脚本】，否则，程序无法启动；

---

其中，【启动脚本】中，支持如下变量：

- `{pwd}` 当前程序运行的目录
- `{program_name}` 即上面的【程序名】 -->

## 其它配置

### 检查失效资源功能

描述：

开启后，在详情页面，会在页面中显示资源是否有效：

![](/images/cleavage/image-1.png)

### 当检测到失效链接时，自动从索引中删除

此功能，需要“检查失效资源功能”开启，否则不会生效；

描述：

在详情页面，如果检测到失效链接，系统会自动从索引中删除；

### 是否在资源失效时搜索同名资源

如果资源失效，则会在详情页面，显示同名资源的搜索结果；

### 开启失效资源跳转搜索页面

如果资源失效，则会用失效资源的名称作为搜索词，跳转到搜索页面；

注：该功能的优选级高于“是否在资源失效时搜索同名资源”；

### 用户/游客是否可以导入资源

如果开启，则用户/游客可以导入资源；会在首页显示导入资源的按钮；

### 首页展示搜索推荐词

如果开启，则会在首页展示搜索推荐词；

“搜索推荐词”通过“列表管理”添加；

### 首页展示影视推荐词

如果开启，则会在首页展示影视推荐词；
“影视推荐词”通过【热门管理】=> “影视热词”添加；

### 禁用影视搜索

开启后，会屏蔽大部分影视资源；

如果需要迁移旧数据（因为该功能需要全文索引的支持），如果版本<0.2.1 需要先“重建索引”，然后运行如果命令：

```sh
./reman fix rel-movie
```

### 移除相似的影视资源

背景：有些用户会把同个资源生成多个分享链接，导致某页搜索结果中，同用户的相似资源过多，影响用户体验；

可以通过此功能，移除相似的影视资源；

系统后台定期检测，如果发现相似资源，则会移除；

### 不收录重复资源

有一些用户将同一份资源，通过多次分享生成了不同的分享链接，但这还是属于同一份资源；

开启该选项，系统会自动检测，如果发现资源名称和用户名已经存在，则不再收录；

### 详情页描述模板

利用该功能，可以自定义详情页的描述( description )；

模板中支持的变量：

<!--
		"%site_name%":  siteName,
		"%site_title%": siteTitle,
		"%disk_name%":  d.DiskName,
		"%disk_type%":  strx.GetNameByType(d.DiskType),
		"%disk_link%":  godiskspider.GetLink(d.DiskID, d.DiskType, d.DiskPass),
		"%disk_files%": d.Files,

		"%disk_share_time%":  d.SharedTime.Format(time.DateTime),
		"%disk_create_time%": d.CreateTime.Format(time.DateTime),
 -->

- `%site_name%`: 站点名称
- `%site_title%`: 站点标题
- `%disk_name%`: 资源名称
- `%disk_type%`: 资源类型
- `%disk_link%`: 资源链接
- `%disk_files%`: 资源文件列表
- `%disk_share_time%`: 资源分享时间
- `%disk_create_time%`: 资源入库时间
- `%disk_update_time%`: 资源更新时间

**注意：** 系统会截断 150 个字符，超出部分会被截断；

### 详情页 h1 标题模板

支持的变量和上面 "详情页描述模板" 一致，参考上面；

**注意：** 系统截断 60 个字符;

### 详情页标题模板

支持的变量和上面 "详情页描述模板" 一致，参考上面；

**注意：** 系统截断 60 个字符;

### 影视页标题模板

利用该功能，可以自定义影视页的 h1 标题（伪）；

模板中支持的变量：

- `%site_name%`: 站点名称
- `%film_name%`: 影视名称

### 影视页关键词模板

利用该功能，可以自定义影视页的关键词( keywords )；

模板中支持的变量：

- `%site_name%`: 站点名称
- `%film_name%`: 影视名称
- `%film_desc%`: 影视描述
- `%film_show%`: 影视元信息

**注意：**系统会截断 5 个关键词(以, 区分)；

### 影视页描述模板

利用该功能，可以自定义详情页的描述( description )；

模板中支持的变量：

- `%site_name%`: 站点名称
- `%site_title%`: 站点标题
- `%film_name%`: 影视名称
- `%film_desc%`: 资源描述

**注意：** 系统会截断 150 个字符，超出部分会被截断；

### 达人页描述模板

利用该功能，可以自定义达人页的描述( description )；

模板中支持的变量：

- `%site_name%`: 站点名称
- `%site_title%`: 站点标题
- `%user%`: 用户名称


### 达人页标题模板

支持的变量和上面 "达人页描述模板" 一致，参考上面；

### 生成 SEO 的类型

- `div`: 生成 div 标签，div 标签的 style="display:none"；
- `noscript`: 生成 noscript 标签，noscript 是告诉浏览器/搜索引擎，当不支持 JavaScript 时，显示的内容；

### 资源重复提交检测

启用后将检测资源是否已经被提交过，提交过不再入库（不管曾经是否成功入库）；

用途：如果开启“游客提交资源”，但是没收录他的资源（原因很多，比如在分享黑名单内），可以通过此功能，防止他再次提交；

因为他每次提交，都会去请求网盘 API，防止网盘方封禁服务器 IP；

### 迅雷联盟参数

`https://pan.xunlei.com/s/VNsHuHdNO9yps5RKluFymQImA1?origin=lpss&pwd=z7sg`

和

`https://pan.xunlei.com/s/VNsHuHdNO9yps5RKluFymQImA1?pwd=z7sg&origin=lpss`

是等价的，都是可以计算收益的，不要来问我说：“迅雷官方说，参数只能在密码后面，参数只能放在最后”。迅雷拉新的这些官方人员，并不是技术人员；

> 遇到这些问题，不要和我犟，和我犟，只能算你赢，我也只能送你一个消息免打扰套餐

### 禁止搜索引擎索引详情页

对于网盘搜索网站来说，资源重复性太高了，很容易被搜索引擎 K 掉；

所以，可以通过此功能，禁止搜索引擎索引详情页；

这会在 html 的 head 中，添加：

```html
<meta name="robots" content="noindex" />
```

封掉详情页后，还有影视页面不会受影响；

下列情况，不会添加 noindex：

- 该资源为自己的资源
- 该资源被单独设置为可索引
- [预计版本>0.3.5] 入库时判断资源重复性，在重复资源列表中，会将一个资源**移除**noindex（优先是自己的资源）；我将这称为“智能noindex”
